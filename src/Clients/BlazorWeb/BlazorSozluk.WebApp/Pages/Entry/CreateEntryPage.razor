@page "/createEntry"

<br />
<br />

<EditForm Model="@command" OnValidSubmit="@CreateEntry">
    <div class="entry-comment-add-container p-5">
        <div class="entry-comment-add">
            <InputText @bind-Value="command.Subject" class="form-control" placeholder="Konu" />
            <br />

            <InputTextArea @bind-Value="command.Content" class="entry-comment-textarea" placeholder="Bir şeyler yazın." />

            <div class="entry-comment-actions">
                <input type="submit" class="btn btn-success btn-sozluk" value="Oluştur"/>
            </div>
        </div>
    </div>
</EditForm>

@code {
    [Inject]
    public IEntryService entryService { get; set; }

    [Inject]
    public NavigationManager navigationManager { get; set; }

    private CreateEntryCommand command = new();

    public async Task CreateEntry()
    {
        var createdEntryId = await entryService.CreateEntry(command); // Entry olusturulsun ve o entry'nin id'sini donsun.

        navigationManager.NavigateTo($"/entry/{createdEntryId}"); // Entry olusturulduktan sonra detay sayfasina yonlendirme islemi
    }
}
